"use strict";(self["webpackChunkhmtt"]=self["webpackChunkhmtt"]||[]).push([[438],{856:function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});var i=function(){var e=this,t=e._self._c;return t("div",[t("van-nav-bar",{attrs:{title:"黑马头条 - 登录"}}),t("van-form",{on:{submit:e.onSubmit}},[t("van-field",{attrs:{name:"mobile",label:"手机号",placeholder:"请输入手机号",required:"",rules:[{required:!0,message:"请填写手机号",pattern:/^1[3456789]\d{9}$/}]},model:{value:e.user.mobile,callback:function(t){e.$set(e.user,"mobile",t)},expression:"user.mobile"}}),t("van-field",{attrs:{type:"password",name:"code",label:"密码",placeholder:"请输入密码",required:"",rules:[{required:!0,message:"请填写密码",pattern:/^\d{6}$/}]},model:{value:e.user.code,callback:function(t){e.$set(e.user,"code",t)},expression:"user.code"}}),t("div",{staticStyle:{margin:"16px"}},[t("van-button",{attrs:{loading:e.isLoading,disabled:e.isLoading,"loading-text":"加载中...",round:"",block:"",type:"info","native-type":"submit"}},[e._v("登录")])],1)],1)],1)},o=[],a=n(9262),s=n(8542),l=n(2209),r=n(5414),c={data(){return{user:{mobile:"13888888888",code:"246810"},isLoading:!1}},methods:{async onSubmit(e){this.isLoading=!0;try{const t=await(0,s.UO)(e);console.log(t),(0,a.Z)({type:"success",message:"登录成功！"}),(0,l.o4)(t.data.data.token),(0,r.po)("refresh_token",t.data.data.refresh_token),this.$router.replace({path:this.$route.query.path||"/layout/home"})}catch(t){(0,a.Z)({type:"danger",message:"账号或密码错误"})}this.isLoading=!1}}},u=c,d=n(1001),f=(0,d.Z)(u,i,o,!1,null,"3052d3d7",null),m=f.exports},9262:function(e,t,n){n.d(t,{Z:function(){return E}});n(5623),n(4966),n(4933),n(3671),n(3979),n(6121),n(7658);var i=n(9037),o=n(8099),a=n(5127),s=n(44),l=0;function r(e){e?(l||document.body.classList.add("van-toast--unclickable"),l++):(l--,l||document.body.classList.remove("van-toast--unclickable"))}var c=n(9607),u=n(9757),d=n(5393),f=(0,a.d)("toast"),m=f[0],h=f[1],p=m({mixins:[(0,c.e)()],props:{icon:String,className:null,iconPrefix:String,loadingType:String,forbidClick:Boolean,closeOnClick:Boolean,message:[Number,String],type:{type:String,default:"text"},position:{type:String,default:"middle"},transition:{type:String,default:"van-fade"},lockScroll:{type:Boolean,default:!1}},data:function(){return{clickable:!1}},mounted:function(){this.toggleClickable()},destroyed:function(){this.toggleClickable()},watch:{value:"toggleClickable",forbidClick:"toggleClickable"},methods:{onClick:function(){this.closeOnClick&&this.close()},toggleClickable:function(){var e=this.value&&this.forbidClick;this.clickable!==e&&(this.clickable=e,r(e))},onAfterEnter:function(){this.$emit("opened"),this.onOpened&&this.onOpened()},onAfterLeave:function(){this.$emit("closed")},genIcon:function(){var e=this.$createElement,t=this.icon,n=this.type,i=this.iconPrefix,o=this.loadingType,a=t||"success"===n||"fail"===n;return a?e(u.Z,{class:h("icon"),attrs:{classPrefix:i,name:t||n}}):"loading"===n?e(d.Z,{class:h("loading"),attrs:{type:o}}):void 0},genMessage:function(){var e=this.$createElement,t=this.type,n=this.message;if((0,s.Xq)(n)&&""!==n)return"html"===t?e("div",{class:h("text"),domProps:{innerHTML:n}}):e("div",{class:h("text")},[n])}},render:function(){var e,t=arguments[0];return t("transition",{attrs:{name:this.transition},on:{afterEnter:this.onAfterEnter,afterLeave:this.onAfterLeave}},[t("div",{directives:[{name:"show",value:this.value}],class:[h([this.position,(e={},e[this.type]=!this.icon,e)]),this.className],on:{click:this.onClick}},[this.genIcon(),this.genMessage()])])}}),g=n(5719),v={icon:"",type:"text",mask:!1,value:!0,message:"",className:"",overlay:!1,onClose:null,onOpened:null,duration:2e3,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,getContainer:"body",overlayStyle:null,closeOnClick:!1,closeOnClickOverlay:!1},y={},b=[],k=!1,C=(0,i.Z)({},v);function Z(e){return(0,s.Kn)(e)?e:{message:e}}function $(e){return document.body.contains(e)}function x(){if(s.sk)return{};if(b=b.filter((function(e){return!e.$el.parentNode||$(e.$el)})),!b.length||k){var e=new(o.ZP.extend(p))({el:document.createElement("div")});e.$on("input",(function(t){e.value=t})),b.push(e)}return b[b.length-1]}function S(e){return(0,i.Z)({},e,{overlay:e.mask||e.overlay,mask:void 0,duration:void 0})}function L(e){void 0===e&&(e={});var t=x();return t.value&&t.updateZIndex(),e=Z(e),e=(0,i.Z)({},C,y[e.type||C.type],e),e.clear=function(){t.value=!1,e.onClose&&(e.onClose(),e.onClose=null),k&&!s.sk&&t.$on("closed",(function(){clearTimeout(t.timer),b=b.filter((function(e){return e!==t})),(0,g.Z)(t.$el),t.$destroy()}))},(0,i.Z)(t,S(e)),clearTimeout(t.timer),e.duration>0&&(t.timer=setTimeout((function(){t.clear()}),e.duration)),t}var O=function(e){return function(t){return L((0,i.Z)({type:e},Z(t)))}};["loading","success","fail"].forEach((function(e){L[e]=O(e)})),L.clear=function(e){b.length&&(e?(b.forEach((function(e){e.clear()})),b=[]):k?b.shift().clear():b[0].clear())},L.setDefaultOptions=function(e,t){"string"===typeof e?y[e]=t:(0,i.Z)(C,e)},L.resetDefaultOptions=function(e){"string"===typeof e?y[e]=null:(C=(0,i.Z)({},v),y={})},L.allowMultiple=function(e){void 0===e&&(e=!0),k=e},L.install=function(){o.ZP.use(p)},o.ZP.prototype.$toast=L;var w=L,E=({type:e,message:t})=>{"danger"===e&&(e="fail"),w({type:e,message:t})}},5414:function(e,t,n){n.d(t,{cF:function(){return o},po:function(){return i}});const i=(e,t)=>{localStorage.setItem(e,t)},o=e=>localStorage.getItem(e)}}]);
//# sourceMappingURL=Login.f9dbefc7.js.map